# Backend Environment Configuration
# Copy this file to .env and update values as needed
#
# NOTE: When deploying with Azure Developer CLI (azd), these values are
# automatically configured via:
# 1. preprovision hooks create Entra ID app registrations
# 2. Values are exported to azd environment
# 3. Bicep parameters reference these values
# 4. Container App environment variables are set from Bicep

# ===========================================
# Authentication Configuration
# ===========================================
# Set to "false" to disable auth (local development without Entra)
AUTH_ENABLED=false

# Azure Entra ID tenant ID (from Azure Portal or preprovision script)
# Automatically set by: azd env set AZURE_TENANT_ID
AZURE_TENANT_ID=

# Backend API App ID URI (e.g., api://<app-id>)
# This is the "audience" claim expected in tokens
# Automatically set by: azd env set AZURE_API_SCOPE
AZURE_API_SCOPE=

# Backend API App ID (GUID)
# Used for token validation
# Automatically set by: azd env set AZURE_API_APP_ID
AZURE_API_APP_ID=

# ===========================================
# Cosmos DB Configuration
# ===========================================
# Authentication mode for Cosmos DB:
# - In Azure: Uses managed identity via DefaultAzureCredential (no keys needed)
# - Local with emulator: Set COSMOS_EMULATOR=true (uses well-known emulator key)
# - Local with Azure: Uses Azure CLI credential (run `az login` first)

# Set to "true" to use Cosmos DB Emulator for local development
# When true, uses the emulator at https://localhost:8081 with the well-known key
COSMOS_EMULATOR=true

# Cosmos DB endpoint URL (from Azure Portal)
# Not needed when using emulator (COSMOS_EMULATOR=true)
# Automatically set in Azure via Bicep
COSMOS_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/

# Database name (default: echoapp)
COSMOS_DB_NAME=echoapp

# Container names (defaults)
COSMOS_DECKS_CONTAINER=decks
COSMOS_CARDS_CONTAINER=cards

# ===========================================
# Azure OpenAI Configuration (Agent Framework)
# ===========================================
# Required for AI tutor agents in /learn
# Uses DefaultAzureCredential for authentication by default

# Azure OpenAI endpoint URL
# Example: https://your-openai.openai.azure.com/
AZURE_OPENAI_ENDPOINT=

# Deployment name for the chat model (must support structured output / JSON mode)
# Recommended: gpt-4o or gpt-4o-mini deployment
AZURE_OPENAI_RESPONSES_DEPLOYMENT_NAME=gpt-4o

# API version for Azure OpenAI Responses API
# The Agent Framework Azure client requires the literal value "preview".
# Override only if instructed by Azure OpenAI documentation for Responses API.
AZURE_OPENAI_API_VERSION=preview

# Authentication uses DefaultAzureCredential:
# - In Azure: Managed Identity (automatically configured)
# - Locally: Azure CLI credentials (run `az login` first)

# ===========================================
# CORS Configuration
# ===========================================
# Comma-separated list of allowed origins
# Automatically set in Azure to frontend Container App URL
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
