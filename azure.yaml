name: echo-app
metadata:
  template: echo-app@0.0.1

services:
  backend:
    project: ./backend
    language: python
    host: containerapp
    docker:
      path: ./Dockerfile
      context: .

  frontend:
    project: ./frontend
    language: js
    host: containerapp
    docker:
      path: ./Dockerfile
      context: .
      buildArgs:
        - VITE_API_URL=${VITE_API_URL}

hooks:
  postprovision:
    shell: sh
    run: |
      echo "Deployment complete!"
      echo "Frontend URL: ${FRONTEND_URI}"
      echo "Backend URL (public API): ${BACKEND_URI}"
      echo "VITE_API_URL: ${VITE_API_URL}"
